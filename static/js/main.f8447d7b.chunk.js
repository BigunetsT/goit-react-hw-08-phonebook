(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[3],{30:function(t,e,n){t.exports={email:"UserMenu_email__2lcZk",btn:"UserMenu_btn__1uY27"}},31:function(t,e,n){"use strict";n.d(e,"b",(function(){return k})),n.d(e,"d",(function(){return w})),n.d(e,"a",(function(){return x})),n.d(e,"c",(function(){return z}));var r=n(6),c=n.n(r),a=n(18),u=n(12),o=n.n(u),s=n(2),i=Object(s.b)("contacts/fetchContactRequest"),b=Object(s.b)("contacts/fetchContactSuccess"),l=Object(s.b)("contacts/fetchContactError"),j=Object(s.b)("contacts/addContactRequest"),d=Object(s.b)("contacts/addContactSuccess"),O=Object(s.b)("contacts/addContactError"),f=Object(s.b)("contacts/deleteContactRequest"),h=Object(s.b)("contacts/deleteContactSuccess"),p=Object(s.b)("contacts/deleteContactError"),g=Object(s.b)("contacts/updateContactRequest"),m=Object(s.b)("contacts/updateContactSuccess"),v=Object(s.b)("contacts/updateContactError"),x=Object(s.b)("contacts/filter");o.a.defaults.baseURL="https://connections-api.herokuapp.com";var C,k={fetchContacts:function(){return function(){var t=Object(a.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(i()),t.prev=1,t.next=4,o.a.get("/contacts");case 4:n=t.sent,r=n.data,e(b(r)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e(l(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},addContact:function(t){var e=t.name,n=t.number;return function(){var t=Object(a.a)(c.a.mark((function t(r){var a,u,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={name:e,number:n},r(j()),t.prev=2,t.next=5,o.a.post("/contacts",a);case 5:u=t.sent,s=u.data,r(d(s)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),r(O(t.t0));case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()},deleteContact:function(t){return function(){var e=Object(a.a)(c.a.mark((function e(n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(f()),e.prev=1,e.next=4,o.a.delete("/contacts/".concat(t));case 4:n(h(t)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),n(p(e.t0));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},updateContact:function(t){var e=t.id,n=t.name,r=t.number;return function(){var t=Object(a.a)(c.a.mark((function t(a){var u,s,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u={name:n,number:r},a(g()),t.prev=2,t.next=5,o.a.patch("/contacts/".concat(e),u);case 5:s=t.sent,i=s.data,a(m(i)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),a(v(t.t0));case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()}},S=n(23),y=function(t){return t.contacts.filter},_=function(t){return t.contacts.items},E=Object(S.a)([_,y],(function(t,e){var n=e.toLowerCase();return t.filter((function(t){return t.name.toLowerCase().includes(n)}))})),w={getFilter:y,getContacts:_,getVisibleContacts:E,getSortContacts:Object(S.a)([E],(function(t){return t.sort((function(t,e){return t.name>e.name?1:-1}))}))},U=n(4),A=n(11),R=n(25),q=n(7),N=Object(s.c)([],(C={},Object(U.a)(C,d,(function(t,e){var n=e.payload;return[].concat(Object(R.a)(t),[n])})),Object(U.a)(C,h,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),Object(U.a)(C,b,(function(t,e){return e.payload})),Object(U.a)(C,m,(function(t,e){var n=e.payload;return t.map((function(t){return t.id===n.id?Object(A.a)(Object(A.a)({},t),{},{name:n.name,number:n.number}):t}))})),C)),T=Object(s.c)("",Object(U.a)({},x,(function(t,e){return e.payload}))),z=Object(q.b)({items:N,filter:T})},36:function(t,e,n){},48:function(t,e,n){t.exports={header:"AppBar_header__2F-LS"}},49:function(t,e,n){t.exports={container:"Container_container__3Snq1"}},87:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),a=n(22),u=n.n(a),o=n(10),s=n(17),i=n(47),b=n(32),l=n(33),j=n(35),d=n(34),O=n(5),f={home:"/",register:"/register",login:"/login",contacts:"/contacts"},h=(n(36),n(9)),p=n(1),g=Object(o.b)((function(t){return{isAuthenticated:h.c.getIsAuthenticated(t)}}))((function(t){var e=t.isAuthenticated;return Object(p.jsxs)("nav",{children:[Object(p.jsx)(s.b,{className:"header__link",activeClassName:"header__link-active",exact:!0,to:f.home,children:"\u0413\u043e\u043b\u043e\u0432\u043d\u0430"}),e&&Object(p.jsx)(s.b,{className:"header__link",activeClassName:"header__link-active",to:f.contacts,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0438"})]})})),m=n(30),v=n.n(m),x={onLogout:h.a.logOut},C=Object(o.b)((function(t){return{email:h.c.getUserEmail(t)}}),x)((function(t){var e=t.email,n=t.onLogout;return Object(p.jsxs)("div",{children:[Object(p.jsx)("span",{className:v.a.email,children:e}),Object(p.jsx)("button",{type:"button",className:v.a.btn,onClick:n,children:"\u0412\u0438\u0439\u0442\u0438"})]})})),k=function(t){return Object(p.jsxs)("nav",{children:[Object(p.jsx)(s.b,{className:"header__link",activeClassName:"header__link-active",exact:!0,to:f.register,children:"\u0420\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u044f"}),Object(p.jsx)(s.b,{className:"header__link",activeClassName:"header__link-active",to:f.login,children:"\u0412\u0445\u0456\u0434"})]})},S=n(48),y=n.n(S),_=Object(o.b)((function(t){return{isAuthenticated:h.c.getIsAuthenticated(t)}}))((function(t){var e=t.isAuthenticated;return Object(p.jsxs)("header",{className:y.a.header,children:[Object(p.jsx)(g,{}),e?Object(p.jsx)(C,{}):Object(p.jsx)(k,{})]})})),E=n(49),w=n.n(E),U=function(t){var e=t.children;return Object(p.jsx)("div",{className:w.a.container,children:e})},A=n(11),R=n(24),q=Object(o.b)((function(t){return{isAuthenticated:h.c.getIsAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,r=t.redirectTo,c=Object(R.a)(t,["component","isAuthenticated","redirectTo"]);return Object(p.jsx)(O.b,Object(A.a)(Object(A.a)({},c),{},{render:function(t){return n?Object(p.jsx)(e,Object(A.a)({},t)):Object(p.jsx)(O.a,{to:r})}}))})),N=Object(o.b)((function(t){return{isAuthenticated:h.c.getIsAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,r=t.redirectTo,c=Object(R.a)(t,["component","isAuthenticated","redirectTo"]);return Object(p.jsx)(O.b,Object(A.a)(Object(A.a)({},c),{},{render:function(t){return n&&c.restricted?Object(p.jsx)(O.a,{to:r}):Object(p.jsx)(e,Object(A.a)({},t))}}))})),T=Object(r.lazy)((function(){return n.e(1).then(n.bind(null,96))})),z=Object(r.lazy)((function(){return Promise.all([n.e(7),n.e(0)]).then(n.bind(null,99))})),I=Object(r.lazy)((function(){return n.e(2).then(n.bind(null,97))})),L=Object(r.lazy)((function(){return n.e(4).then(n.bind(null,98))})),M=function(t){Object(j.a)(n,t);var e=Object(d.a)(n);function n(){return Object(b.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetCurretnUser()}},{key:"render",value:function(){return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(U,{children:[Object(p.jsx)(_,{}),Object(p.jsx)(r.Suspense,{fallback:Object(p.jsx)("h1",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."}),children:Object(p.jsxs)(O.d,{children:[Object(p.jsx)(N,{exact:!0,path:f.home,component:T}),Object(p.jsx)(N,{path:f.login,restricted:!0,redirectTo:f.contacts,component:I}),Object(p.jsx)(N,{path:f.register,restricted:!0,redirectTo:f.contacts,component:L}),Object(p.jsx)(q,{path:f.contacts,redirectTo:f.login,component:z})]})})]})})}}]),n}(r.Component),B={onGetCurretnUser:h.a.getCurrentUser},F=Object(o.b)(null,B)(M),G=n(25),J=n(2),D=n(31),P=n(50),V=n.n(P),Y=n(19),Z=n(51),H=n.n(Z),K=[].concat(Object(G.a)(Object(J.d)({serializableCheck:{ignoredActions:[Y.a,Y.f,Y.b,Y.c,Y.d,Y.e]}})),[V.a]),Q={key:"auth",storage:H.a,whitelist:["token"]},W=Object(J.a)({reducer:{auth:Object(Y.g)(Q,h.b),contacts:D.c},middleware:K,devTools:!1}),X={store:W,persistor:Object(Y.h)(W)};n(86);u.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(o.a,{store:X.store,children:Object(p.jsx)(i.a,{loading:null,persistor:X.persistor,children:Object(p.jsx)(s.a,{children:Object(p.jsx)(F,{})})})})}),document.getElementById("root"))},9:function(t,e,n){"use strict";n.d(e,"b",(function(){return k})),n.d(e,"a",(function(){return R})),n.d(e,"c",(function(){return q}));var r,c,a,u,o=n(2),s=Object(o.b)("auth/registerRequest"),i=Object(o.b)("auth/registerSuccess"),b=Object(o.b)("auth/registerError"),l=Object(o.b)("auth/loginRequest"),j=Object(o.b)("auth/loginSuccess"),d=Object(o.b)("auth/loginError"),O={registerRequest:s,registerSuccess:i,registerError:b,logoutRequest:Object(o.b)("auth/logoutRequest"),logoutSuccess:Object(o.b)("auth/logoutSuccess"),logoutError:Object(o.b)("auth/logoutError"),loginRequest:l,loginSuccess:j,loginError:d,getCurrentUserRequest:Object(o.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(o.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(o.b)("auth/getCurrentUserError")},f=n(4),h=n(7),p={name:null,email:null},g=Object(o.c)(p,(r={},Object(f.a)(r,O.registerSuccess,(function(t,e){return e.payload.user})),Object(f.a)(r,O.loginSuccess,(function(t,e){return e.payload.user})),Object(f.a)(r,O.logoutSuccess,(function(){return p})),Object(f.a)(r,O.getCurrentUserSuccess,(function(t,e){return e.payload})),r)),m=Object(o.c)(null,(c={},Object(f.a)(c,O.registerSuccess,(function(t,e){return e.payload.token})),Object(f.a)(c,O.loginSuccess,(function(t,e){return e.payload.token})),Object(f.a)(c,O.logoutSuccess,(function(){return null})),c)),v=function(t,e){return e.payload},x=Object(o.c)(null,(a={},Object(f.a)(a,O.registerError,v),Object(f.a)(a,O.loginError,v),Object(f.a)(a,O.logoutError,v),Object(f.a)(a,O.getCurrentUserError,v),a)),C=Object(o.c)(!1,(u={},Object(f.a)(u,O.registerSuccess,(function(){return!0})),Object(f.a)(u,O.loginSuccess,(function(){return!0})),Object(f.a)(u,O.getCurrentUserSuccess,(function(){return!0})),Object(f.a)(u,O.registerError,(function(){return!1})),Object(f.a)(u,O.loginError,(function(){return!1})),Object(f.a)(u,O.getCurrentUserError,(function(){return!1})),Object(f.a)(u,O.logoutSuccess,(function(){return!1})),u)),k=Object(h.b)({user:g,isAuthenticated:C,token:m,error:x}),S=n(6),y=n.n(S),_=n(18),E=n(12),w=n.n(E);w.a.defaults.baseURL="https://connections-api.herokuapp.com";var U=function(t){w.a.defaults.headers.common.Authorization="Bearer ".concat(t)},A=function(){w.a.defaults.headers.common.Authorization=""},R={register:function(t){return function(){var e=Object(_.a)(y.a.mark((function e(n){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(O.registerRequest()),e.prev=1,e.next=4,w.a.post("/users/signup",t);case 4:r=e.sent,U(r.data.token),n(O.registerSuccess(r.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(O.registerError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logIn:function(t){return function(){var e=Object(_.a)(y.a.mark((function e(n){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(O.loginRequest()),e.prev=1,e.next=4,w.a.post("/users/login",t);case 4:r=e.sent,U(r.data.token),n(O.loginSuccess(r.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(O.loginError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logOut:function(){return function(){var t=Object(_.a)(y.a.mark((function t(e){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(O.logoutRequest()),t.prev=1,t.next=4,w.a.post("/users/logout");case 4:A(),e(O.logoutSuccess()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e(O.logoutError(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var t=Object(_.a)(y.a.mark((function t(e,n){var r,c,a;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n(),c=r.auth.token){t.next=3;break}return t.abrupt("return");case 3:return U(c),e(O.getCurrentUserRequest()),t.prev=5,t.next=8,w.a.get("/users/current");case 8:a=t.sent,e(O.getCurrentUserSuccess(a.data)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e(O.getCurrentUserError(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,n){return t.apply(this,arguments)}}()}},q={getIsAuthenticated:function(t){return t.auth.isAuthenticated},getUserEmail:function(t){return t.auth.user.email}}}},[[87,5,6]]]);
//# sourceMappingURL=main.f8447d7b.chunk.js.map